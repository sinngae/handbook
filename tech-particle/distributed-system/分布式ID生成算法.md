# 分布式ID生成算法
uuid 128太长，zk性能不满足，snowflake需要多研究

## uuid算法
(略)

## snowflake算法
### 举例
[39bit毫秒数][4bit业务线id][2bit机房id][7bit机器id][5bit预留][7bit毫秒内序号]  
每台服务器绝对递增，全局看只是趋势递增  
必然按msg-id/order-id/worker-id分库分表，取模运算要求ID生成具有“取模随机性",所以毫秒内序列号放最后，保证ID随机  
跨毫秒时，序号总是归0，序号尾为0的比较多，生成的ID取模不均匀，所以不是每次归零，而是归到0-9的随机数。

### snowflake算法
[1bit不用][41bit时间戳][10bit机器ID][12bit序列号]  
第一比特保留  
时间戳，41比特，从2016年11月1日零点到现在的毫秒数,可以用到2156年，100多年后才会用完  
机器id，10比特，这个机器id每个业务要唯一，机器id获取的策略后面会详述  
序列号，12比特，每台机器每毫秒最多产生4096个id，超过这个数的话会等到下一毫秒 
