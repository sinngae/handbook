同源策略
---
#  同源策略
目标：
+ 保护用户数据安全，防止恶意网站通过脚本窃取用户在本网站上的信息（Cookie、localstorage）
+ 有效防止了跨站脚本攻击（XSS） 和 跨站请求伪造（CSRF）等问题


浏览器要求：
+ AJAX请求：默认禁止跨域的XMLHttpRequest和Fetch API请求。
+ DOM访问：禁止跨域访问iframe内的contentWindow。
+ 存储数据：禁止读取跨域的Cookie、LocalStorage等。
+ 脚本与资源加载：允许加载跨域资源（如`<script>、<img>`），但限制访问其内容。

# 跨域解决方案

同源策略是守护，但跨域通信不可避免。
+ CORS（跨源资源共享）：通过服务器设置Access-Control-Allow-Origin头部，允许特定源访问资源。
+ JSONP（JSON with Padding）：利用`<script>`标签不受同源策略限制的特性，通过动态创建`<script>`标签来请求跨域资源。
    + 存在jsonp被劫持漏洞，恶意网站借助jsonp
+ 代理服务器：在服务器端设置代理，转发跨域请求。
+ PostMessage：用于在不同源之间安全地传递消息，常用于iframe之间的通信。
+ WebSockets：提供全双工通信，不受同源策略限制。
+ Document.domain：通过设置document.domain为相同的基础域名，允许具有相同根域的不同子域之间的通信。