Distributed Lock
---

+ 锁需要具备唯一性
+ 锁需要有超时时间,防止死锁
    + 锁过期了，业务还没有执行完？
    + 需要对业务做超时限制
        + 如果任务不可以再切割，超时后续期
        + 如果任务可以切割
            + 超时后退出当前执行
            + 超时后续接时间
+ 锁的创建和设置锁超时时间需要具备原子性
+ 锁的超时的续期问题
+ B的锁被A给释放了的问题
+ 锁的可重入问题
+ 集群下分布式锁的问题

# Ref
https://martin.kleppmann.com/2016/02/08/how-to-do-distributed-locking.html


# 分布式锁设计
``


获取到锁后，线程异常。
+ 线程异常捕捉，捕捉后的锁释放